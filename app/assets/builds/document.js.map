{
  "version": 3,
  "sources": ["../../javascript/document.js"],
  "sourcesContent": ["document.addEventListener(\"DOMContentLoaded\", () => {\n    paramKey = \"document\";\n    window.scrollTo(0, 0);\n    $(\"#document_url\").on(\"change\", function(e) {\n      const value = e.target.value;\n    });\n    initBuildings();\n    initPeople();\n    function initPeople() {\n      $(\"#person-question .btn-primary\").on(\"click\", function() {\n        $(\"#person-question\").fadeOut();\n        $(\"#person-fields\").fadeIn();\n      });\n      let autocompleteTimeout;\n      $(\"#person-autocomplete\").on(\"keyup\", (e) => {\n        if (e.keyCode === 13) {\n          e.stopPropagation();\n        }\n        const input = e.target;\n        const value = input.value;\n        if (value.length > 1) {\n          if (autocompleteTimeout) {\n            window.clearTimeout(autocompleteTimeout);\n          }\n          autocompleteTimeout = window.setTimeout(() => {\n            $.getJSON(\"/people/autocomplete\", { term: value }, (json) => {\n              const people = [];\n              json.forEach((person) => {\n                people.push(`<div class=\"list-group-item list-group-item-action\" data-person=${person.id}>${person.name} (${person.id}) - ${person.years}</div>`);\n              });\n              $(\"#person-results\").html(people).show();\n              $(\"#person-results .list-group-item\").on(\"click\", (e2) => {\n                const id = e2.target.dataset.person;\n                const name = e2.target.innerHTML;\n                addPerson(id, name);\n                input.value = null;\n                $(\"#person-results\").html(\"\");\n              });\n            });\n          }, 500);\n        }\n      });\n    }\n    function initBuildings() {\n      $(\"#building-question .btn-primary\").on(\"click\", function() {\n        $(\"#building-question\").fadeOut();\n        $(\"#building-fields\").fadeIn();\n      });\n      $(\"#building-autocomplete\").on(\"keyup\", (e) => {\n        if (e.keyCode === 13) {\n          e.stopPropagation();\n        }\n        const input = e.target;\n        const value = input.value;\n        if (value.length > 1) {\n          $.getJSON(\"/buildings/autocomplete\", { term: value }, (json) => {\n            const buildings = [];\n            json.forEach((building) => {\n              buildings.push(`<div class=\"list-group-item list-group-item-action\" data-building=${building.id} data-lat=\"${building.lat}\" data-lon=\"${building.lon}\">${building.address}</div>`);\n            });\n            $(\"#building-results\").html(buildings).show();\n            $(\"#building-results .list-group-item\").on(\"click\", (e2) => {\n              const id = e2.target.dataset.building;\n              const lat = e2.target.dataset.lat;\n              const lon = e2.target.dataset.lon;\n              const address = e2.target.innerHTML;\n              addBuilding(id, address, lat, lon);\n              input.value = null;\n              $(\"#building-results\").html(\"\");\n            });\n          });\n        }\n      });\n    }\n    function addBuilding(id, address, lat, lon) {\n      const formId = `documents_building_ids_${id}`;\n      $(`#${formId}`).closest(\".form-check\").remove();\n      const html = `<div class=\"form-check\"><input type=\"checkbox\" class=\"form-check-input\" name=\"${paramKey}[building_ids][]\" id=\"${formId}\" value=\"${id}\" checked /><label class=\"form-check-label\" for=\"${formId}\">${address}</label></div>`;\n      $(`.${paramKey}_building_ids`).append(html);\n      if ($(`.${paramKey}_building_ids input:checked`).length === 1) {\n      }\n    }\n    function addPerson(id, name) {\n      const formId = `${paramKey}_person_ids_${id}`;\n      $(`#person-fields input[value=${id}]`).closest(\".form-check\").remove();\n      const html = `<div class=\"form-check\"><input type=\"checkbox\" class=\"form-check-input\" name=\"${paramKey}[person_ids][]\" id=\"${formId}\" value=\"${id}\" checked /><label class=\"form-check-label\" for=\"${formId}\">${name}</label></div>`;\n      $(`.${paramKey}_person_ids`).append(html);\n    }\n  });"],
  "mappings": "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",
  "names": []
}
