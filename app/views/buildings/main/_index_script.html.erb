<script type="text/javascript">
document.addEventListener('DOMContentLoaded', (event) => {
  $('#new_s').advancedSearch({
    url: '/buildings/advanced_search_filters.json',
    fields: <%== @search.f.to_json -%>,
    filters: <%== @search.s.to_json -%>
  });

  new agGrid.Grid(document.querySelector('#grid'), {
    components: {
      nameCellRenderer: NameCellRenderer, htmlCellRenderer: HTMLCellRenderer
    },
    columnDefs: <%== BuildingGridTranslator.new(@search).column_def.to_json -%>,
    defaultColDef: { width: 100 },
    rowSelection: 'single',
    rowModelType: 'infinite',
    datasource: GridDataSource
  });
});


</script>
